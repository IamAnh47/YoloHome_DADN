{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tuana\\\\University\\\\The_Third_Year\\\\HK242\\\\\\u0110\\u1ED3 \\xE1n \\u0111a ng\\xE0nh\\\\YoloHome_DADN\\\\YoloHome_DADN\\\\frontend\\\\src\\\\components\\\\DeviceControl\\\\DeviceScheduling.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport DeviceController from '../../controllers/DeviceController';\nimport notificationService from '../../services/notificationService';\nimport CountdownStatus from './CountdownStatus';\nimport './DeviceScheduling.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DeviceScheduling = ({\n  deviceType,\n  deviceName\n}) => {\n  _s();\n  const [schedules, setSchedules] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [scheduleType, setScheduleType] = useState('single'); // 'single', 'range', or 'countdown'\n  const [singleSchedule, setSingleSchedule] = useState({\n    action: 'on',\n    time: ''\n  });\n  const [rangeSchedule, setRangeSchedule] = useState({\n    startTime: '',\n    endTime: ''\n  });\n  const [countdownSchedule, setCountdownSchedule] = useState({\n    action: 'off',\n    seconds: 60\n  });\n  const [countdownActive, setCountdownActive] = useState(false);\n  const [remainingTime, setRemainingTime] = useState(0);\n  // Add state for active countdown to display in list\n  // eslint-disable-next-line no-unused-vars\n  const [activeCountdown, setActiveCountdown] = useState(null);\n\n  // Format datetime-local value to ISO string for API\n  const formatDateTimeForApi = dateTimeValue => {\n    return new Date(dateTimeValue).toISOString();\n  };\n\n  // Format datetime for display\n  const formatDateTimeForDisplay = isoString => {\n    if (!isoString) return 'N/A';\n    const date = new Date(isoString);\n    return date.toLocaleString('vi-VN', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Load schedules function wrapped in useCallback to avoid dependency issues\n  const loadSchedules = useCallback(async () => {\n    setLoading(true);\n    try {\n      const deviceSchedules = await DeviceController.getDeviceSchedules(deviceType);\n      setSchedules(deviceSchedules);\n    } catch (error) {\n      console.error('Error loading schedules:', error);\n      notificationService.showAlert(`Không thể tải lịch trình cho ${deviceName}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [deviceType, deviceName]);\n\n  // Load schedules when component mounts\n  useEffect(() => {\n    loadSchedules();\n  }, [loadSchedules]);\n  const handleSingleScheduleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setSingleSchedule(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleRangeScheduleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setRangeSchedule(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleCountdownScheduleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCountdownSchedule(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const setCountdownPreset = seconds => {\n    setCountdownSchedule(prev => ({\n      ...prev,\n      seconds\n    }));\n  };\n  const validateSchedule = () => {\n    if (scheduleType === 'single') {\n      if (!singleSchedule.time) {\n        notificationService.showAlert('Vui lòng chọn thời gian hẹn giờ', 'warning');\n        return false;\n      }\n\n      // Check if time is in the past\n      if (new Date(singleSchedule.time) <= new Date()) {\n        notificationService.showAlert('Thời gian hẹn giờ phải ở tương lai', 'warning');\n        return false;\n      }\n    } else if (scheduleType === 'range') {\n      if (!rangeSchedule.startTime || !rangeSchedule.endTime) {\n        notificationService.showAlert('Vui lòng chọn thời gian bắt đầu và kết thúc', 'warning');\n        return false;\n      }\n\n      // Check if start time is after end time\n      if (new Date(rangeSchedule.startTime) >= new Date(rangeSchedule.endTime)) {\n        notificationService.showAlert('Thời gian bắt đầu phải trước thời gian kết thúc', 'warning');\n        return false;\n      }\n\n      // Check if start time is in the past\n      if (new Date(rangeSchedule.startTime) <= new Date()) {\n        notificationService.showAlert('Thời gian bắt đầu phải ở tương lai', 'warning');\n        return false;\n      }\n    } else if (scheduleType === 'countdown') {\n      if (!countdownSchedule.seconds || countdownSchedule.seconds <= 0) {\n        notificationService.showAlert('Vui lòng nhập thời gian hợp lệ', 'warning');\n        return false;\n      }\n    }\n    return true;\n  };\n  const startCountdown = async () => {\n    if (countdownSchedule.seconds <= 0) {\n      notificationService.showAlert('Vui lòng nhập thời gian hợp lệ', 'warning');\n      return;\n    }\n    setCountdownActive(true);\n    setRemainingTime(countdownSchedule.seconds);\n\n    // Create a future timestamp for the scheduled action\n    const actionTime = new Date(Date.now() + countdownSchedule.seconds * 1000).toISOString();\n    const startTime = new Date().toISOString();\n    try {\n      // Create local countdown object first\n      const newCountdown = {\n        id: 'countdown-' + Date.now(),\n        type: 'countdown',\n        action: countdownSchedule.action,\n        startTime: startTime,\n        scheduledTime: actionTime,\n        remainingSeconds: countdownSchedule.seconds,\n        device_type: deviceType\n      };\n\n      // Add to schedules list immediately for visual feedback\n      setActiveCountdown(newCountdown);\n      setSchedules(prev => [newCountdown, ...prev]);\n\n      // Then send to backend\n      await DeviceController.scheduleDevice(deviceType, countdownSchedule.action, actionTime);\n      notificationService.showAlert(`Hẹn giờ ${countdownSchedule.action === 'on' ? 'bật' : 'tắt'} ${deviceName} sau ${countdownSchedule.seconds} giây`, 'success');\n\n      // Start the countdown timer\n      const timer = setInterval(() => {\n        setRemainingTime(prev => {\n          if (prev <= 1) {\n            clearInterval(timer);\n            setCountdownActive(false);\n            setActiveCountdown(null);\n\n            // Reload schedules to refresh the list after countdown completes\n            setTimeout(() => loadSchedules(), 1000);\n            return 0;\n          }\n          return prev - 1;\n        });\n      }, 1000);\n\n      // Cleanup interval on component unmount\n      return () => clearInterval(timer);\n    } catch (error) {\n      console.error('Error creating countdown:', error);\n      notificationService.showAlert(`Không thể tạo hẹn giờ: ${error.message}`, 'error');\n      setCountdownActive(false);\n      setActiveCountdown(null);\n\n      // Remove the local countdown from the list if API call fails\n      setSchedules(prev => prev.filter(s => s.id !== 'countdown-' + Date.now()));\n    }\n  };\n  const handleCreateSchedule = async () => {\n    if (!validateSchedule()) return;\n    setLoading(true);\n    try {\n      if (scheduleType === 'single') {\n        await DeviceController.scheduleDevice(deviceType, singleSchedule.action, formatDateTimeForApi(singleSchedule.time));\n        notificationService.showAlert(`Đã hẹn giờ ${singleSchedule.action === 'on' ? 'bật' : 'tắt'} ${deviceName} vào ${formatDateTimeForDisplay(singleSchedule.time)}`, 'success');\n        // Reset form\n        setSingleSchedule({\n          action: 'on',\n          time: ''\n        });\n      } else if (scheduleType === 'range') {\n        await DeviceController.scheduleDeviceRange(deviceType, formatDateTimeForApi(rangeSchedule.startTime), formatDateTimeForApi(rangeSchedule.endTime));\n        notificationService.showAlert(`Đã hẹn giờ ${deviceName} hoạt động từ ${formatDateTimeForDisplay(rangeSchedule.startTime)} đến ${formatDateTimeForDisplay(rangeSchedule.endTime)}`, 'success');\n        // Reset form\n        setRangeSchedule({\n          startTime: '',\n          endTime: ''\n        });\n      }\n\n      // Reload schedules\n      loadSchedules();\n    } catch (error) {\n      console.error('Error creating schedule:', error);\n      notificationService.showAlert(`Không thể tạo lịch trình: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCancelSchedule = async scheduleId => {\n    if (!window.confirm('Bạn có chắc chắn muốn hủy lịch trình này?')) return;\n\n    // Check if it's a local countdown schedule\n    if (String(scheduleId).startsWith('countdown-')) {\n      setActiveCountdown(null);\n      setCountdownActive(false);\n      setSchedules(prev => prev.filter(s => s.id !== scheduleId));\n      return;\n    }\n    setLoading(true);\n    try {\n      await DeviceController.cancelSchedule(scheduleId);\n      notificationService.showAlert('Đã hủy lịch trình thành công', 'success');\n\n      // Remove from local state\n      setSchedules(prev => prev.filter(s => s.id !== scheduleId && s.schedule_id !== scheduleId));\n    } catch (error) {\n      console.error('Error canceling schedule:', error);\n      notificationService.showAlert(`Không thể hủy lịch trình: ${error.message}`, 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Check if a schedule is expired/completed\n  const isScheduleActive = schedule => {\n    // Always show countdown schedules as active\n    if (schedule.type === 'countdown') {\n      return true;\n    }\n    if (schedule.status === 'completed' || schedule.status === 'canceled' || schedule.executed === true) {\n      return false;\n    }\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\n      const time = schedule.scheduledTime || schedule.start_time;\n      return new Date(time) > new Date();\n    } else {\n      const endTime = schedule.endTime || schedule.end_time;\n      return new Date(endTime) > new Date();\n    }\n  };\n\n  // Get status text based on schedule status and times\n  const getScheduleStatusText = schedule => {\n    // For countdown schedules\n    if (schedule.type === 'countdown') {\n      return /*#__PURE__*/_jsxDEV(CountdownStatus, {\n        initialSeconds: schedule.remainingSeconds,\n        onComplete: () => {\n          // Remove this countdown from the list when complete\n          setSchedules(prevSchedules => prevSchedules.filter(s => s.id !== schedule.id));\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this);\n    }\n    if (schedule.status === 'completed' || schedule.executed === true) return 'Đã hoàn thành';\n    if (schedule.status === 'canceled') return 'Đã hủy';\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\n      const time = schedule.scheduledTime || schedule.start_time;\n      return new Date(time) > new Date() ? 'Chờ thực hiện' : 'Đã hết hạn';\n    } else {\n      const startTime = schedule.startTime || schedule.start_time;\n      const endTime = schedule.endTime || schedule.end_time;\n      if (new Date(endTime) < new Date()) {\n        return 'Đã hết hạn';\n      } else if (new Date(startTime) > new Date()) {\n        return 'Chờ thực hiện';\n      } else {\n        return 'Đang hoạt động';\n      }\n    }\n  };\n\n  // Format seconds to mm:ss\n  const formatSeconds = seconds => {\n    if (!seconds && seconds !== 0) return '00:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Get scheduled time display from schedule object\n  const getScheduleTimeDisplay = schedule => {\n    // For countdown schedules\n    if (schedule.type === 'countdown') {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"B\\u1EAFt \\u0111\\u1EA7u: \", formatDateTimeForDisplay(schedule.startTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"K\\u1EBFt th\\xFAc: \", formatDateTimeForDisplay(schedule.scheduledTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\n      const time = schedule.scheduledTime || schedule.start_time;\n      return formatDateTimeForDisplay(time);\n    } else {\n      const startTime = schedule.startTime || schedule.start_time;\n      const endTime = schedule.endTime || schedule.end_time;\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"B\\u1EAFt \\u0111\\u1EA7u: \", formatDateTimeForDisplay(startTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"K\\u1EBFt th\\xFAc: \", formatDateTimeForDisplay(endTime)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"device-scheduling\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"H\\u1EB9n gi\\u1EDD cho \", deviceName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scheduling-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"schedule-type-selector\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `schedule-type-btn ${scheduleType === 'single' ? 'active' : ''}`,\n          onClick: () => setScheduleType('single'),\n          children: \"H\\u1EB9n gi\\u1EDD \\u0111\\u01A1n l\\u1EBB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `schedule-type-btn ${scheduleType === 'range' ? 'active' : ''}`,\n          onClick: () => setScheduleType('range'),\n          children: \"H\\u1EB9n gi\\u1EDD ho\\u1EA1t \\u0111\\u1ED9ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `schedule-type-btn ${scheduleType === 'countdown' ? 'active' : ''}`,\n          onClick: () => setScheduleType('countdown'),\n          children: \"H\\u1EB9n gi\\u1EDD \\u0111\\u1EBFm ng\\u01B0\\u1EE3c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this), scheduleType === 'single' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"single-schedule-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"H\\xE0nh \\u0111\\u1ED9ng:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"action\",\n            value: singleSchedule.action,\n            onChange: handleSingleScheduleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"on\",\n              children: \"B\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"off\",\n              children: \"T\\u1EAFt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Th\\u1EDDi gian:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            name: \"time\",\n            value: singleSchedule.time,\n            onChange: handleSingleScheduleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 407,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"create-schedule-btn\",\n          onClick: handleCreateSchedule,\n          disabled: loading,\n          children: loading ? 'Đang xử lý...' : 'Tạo lịch trình'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 11\n      }, this) : scheduleType === 'range' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"range-schedule-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Th\\u1EDDi gian b\\u1EAFt \\u0111\\u1EA7u:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            name: \"startTime\",\n            value: rangeSchedule.startTime,\n            onChange: handleRangeScheduleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Th\\u1EDDi gian k\\u1EBFt th\\xFAc:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"datetime-local\",\n            name: \"endTime\",\n            value: rangeSchedule.endTime,\n            onChange: handleRangeScheduleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"create-schedule-btn\",\n          onClick: handleCreateSchedule,\n          disabled: loading,\n          children: loading ? 'Đang xử lý...' : 'Tạo lịch trình'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"countdown-schedule-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"H\\xE0nh \\u0111\\u1ED9ng:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"action\",\n            value: countdownSchedule.action,\n            onChange: handleCountdownScheduleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"on\",\n              children: \"B\\u1EADt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"off\",\n              children: \"T\\u1EAFt\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Th\\u1EDDi gian (gi\\xE2y):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"seconds\",\n            value: countdownSchedule.seconds,\n            onChange: handleCountdownScheduleChange,\n            disabled: countdownActive,\n            min: \"1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"countdown-presets\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCountdownPreset(10),\n              disabled: countdownActive,\n              className: \"preset-btn\",\n              children: \"10s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCountdownPreset(30),\n              disabled: countdownActive,\n              className: \"preset-btn\",\n              children: \"30s\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 486,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCountdownPreset(60),\n              disabled: countdownActive,\n              className: \"preset-btn\",\n              children: \"1m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setCountdownPreset(300),\n              disabled: countdownActive,\n              className: \"preset-btn\",\n              children: \"5m\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), countdownActive ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"countdown-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"countdown-time\",\n            children: formatSeconds(remainingTime)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"countdown-label\",\n            children: [countdownSchedule.action === 'on' ? 'Bật' : 'Tắt', \" sau\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"create-schedule-btn\",\n          onClick: startCountdown,\n          disabled: loading,\n          children: loading ? 'Đang xử lý...' : 'Bắt đầu đếm ngược'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"schedules-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Danh s\\xE1ch l\\u1ECBch tr\\xECnh\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), loading && schedules.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"loading-text\",\n        children: \"\\u0110ang t\\u1EA3i l\\u1ECBch tr\\xECnh...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 11\n      }, this) : schedules.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"no-schedules\",\n        children: \"Kh\\xF4ng c\\xF3 l\\u1ECBch tr\\xECnh n\\xE0o\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"schedules-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Lo\\u1EA1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 541,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Th\\u1EDDi gian\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Tr\\u1EA1ng th\\xE1i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 543,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: schedules.map(schedule => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: isScheduleActive(schedule) ? 'active-schedule' : 'inactive-schedule',\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: schedule.type === 'countdown' ? `Đếm ngược ${schedule.action === 'on' ? 'bật' : 'tắt'}` : schedule.type === 'single' || schedule.schedule_type === 'once' ? `${schedule.action === 'on' ? 'Bật' : 'Tắt'} thiết bị` : 'Khoảng thời gian'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: getScheduleTimeDisplay(schedule)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: getScheduleStatusText(schedule)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 563,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: isScheduleActive(schedule) && /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"cancel-schedule-btn\",\n                onClick: () => handleCancelSchedule(schedule.id || schedule.schedule_id),\n                disabled: loading,\n                children: \"H\\u1EE7y\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 566,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 564,\n              columnNumber: 19\n            }, this)]\n          }, schedule.id || schedule.schedule_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 366,\n    columnNumber: 5\n  }, this);\n};\n_s(DeviceScheduling, \"qGQa3nLT/awGDoGAAxlkKAeelnk=\");\n_c = DeviceScheduling;\nexport default DeviceScheduling;\nvar _c;\n$RefreshReg$(_c, \"DeviceScheduling\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","DeviceController","notificationService","CountdownStatus","jsxDEV","_jsxDEV","Fragment","_Fragment","DeviceScheduling","deviceType","deviceName","_s","schedules","setSchedules","loading","setLoading","scheduleType","setScheduleType","singleSchedule","setSingleSchedule","action","time","rangeSchedule","setRangeSchedule","startTime","endTime","countdownSchedule","setCountdownSchedule","seconds","countdownActive","setCountdownActive","remainingTime","setRemainingTime","activeCountdown","setActiveCountdown","formatDateTimeForApi","dateTimeValue","Date","toISOString","formatDateTimeForDisplay","isoString","date","toLocaleString","day","month","year","hour","minute","loadSchedules","deviceSchedules","getDeviceSchedules","error","console","showAlert","handleSingleScheduleChange","e","name","value","target","prev","handleRangeScheduleChange","handleCountdownScheduleChange","setCountdownPreset","validateSchedule","startCountdown","actionTime","now","newCountdown","id","type","scheduledTime","remainingSeconds","device_type","scheduleDevice","timer","setInterval","clearInterval","setTimeout","message","filter","s","handleCreateSchedule","scheduleDeviceRange","handleCancelSchedule","scheduleId","window","confirm","String","startsWith","cancelSchedule","schedule_id","isScheduleActive","schedule","status","executed","schedule_type","start_time","end_time","getScheduleStatusText","initialSeconds","onComplete","prevSchedules","fileName","_jsxFileName","lineNumber","columnNumber","formatSeconds","mins","Math","floor","secs","toString","padStart","getScheduleTimeDisplay","children","className","onClick","onChange","disabled","min","length","map","_c","$RefreshReg$"],"sources":["C:/Users/tuana/University/The_Third_Year/HK242/Đồ án đa ngành/YoloHome_DADN/YoloHome_DADN/frontend/src/components/DeviceControl/DeviceScheduling.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport DeviceController from '../../controllers/DeviceController';\r\nimport notificationService from '../../services/notificationService';\r\nimport CountdownStatus from './CountdownStatus';\r\nimport './DeviceScheduling.css';\r\n\r\nconst DeviceScheduling = ({ deviceType, deviceName }) => {\r\n  const [schedules, setSchedules] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [scheduleType, setScheduleType] = useState('single'); // 'single', 'range', or 'countdown'\r\n  const [singleSchedule, setSingleSchedule] = useState({\r\n    action: 'on',\r\n    time: ''\r\n  });\r\n  const [rangeSchedule, setRangeSchedule] = useState({\r\n    startTime: '',\r\n    endTime: ''\r\n  });\r\n  const [countdownSchedule, setCountdownSchedule] = useState({\r\n    action: 'off',\r\n    seconds: 60\r\n  });\r\n  const [countdownActive, setCountdownActive] = useState(false);\r\n  const [remainingTime, setRemainingTime] = useState(0);\r\n  // Add state for active countdown to display in list\r\n  // eslint-disable-next-line no-unused-vars\r\n  const [activeCountdown, setActiveCountdown] = useState(null);\r\n  \r\n  // Format datetime-local value to ISO string for API\r\n  const formatDateTimeForApi = (dateTimeValue) => {\r\n    return new Date(dateTimeValue).toISOString();\r\n  };\r\n\r\n  // Format datetime for display\r\n  const formatDateTimeForDisplay = (isoString) => {\r\n    if (!isoString) return 'N/A';\r\n    const date = new Date(isoString);\r\n    return date.toLocaleString('vi-VN', {\r\n      day: '2-digit',\r\n      month: '2-digit',\r\n      year: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n  \r\n  // Load schedules function wrapped in useCallback to avoid dependency issues\r\n  const loadSchedules = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const deviceSchedules = await DeviceController.getDeviceSchedules(deviceType);\r\n      setSchedules(deviceSchedules);\r\n    } catch (error) {\r\n      console.error('Error loading schedules:', error);\r\n      notificationService.showAlert(`Không thể tải lịch trình cho ${deviceName}`, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [deviceType, deviceName]);\r\n  \r\n  // Load schedules when component mounts\r\n  useEffect(() => {\r\n    loadSchedules();\r\n  }, [loadSchedules]);\r\n  \r\n  const handleSingleScheduleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setSingleSchedule(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  const handleRangeScheduleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setRangeSchedule(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const handleCountdownScheduleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCountdownSchedule(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  const setCountdownPreset = (seconds) => {\r\n    setCountdownSchedule(prev => ({\r\n      ...prev,\r\n      seconds\r\n    }));\r\n  };\r\n  \r\n  const validateSchedule = () => {\r\n    if (scheduleType === 'single') {\r\n      if (!singleSchedule.time) {\r\n        notificationService.showAlert('Vui lòng chọn thời gian hẹn giờ', 'warning');\r\n        return false;\r\n      }\r\n      \r\n      // Check if time is in the past\r\n      if (new Date(singleSchedule.time) <= new Date()) {\r\n        notificationService.showAlert('Thời gian hẹn giờ phải ở tương lai', 'warning');\r\n        return false;\r\n      }\r\n    } else if (scheduleType === 'range') {\r\n      if (!rangeSchedule.startTime || !rangeSchedule.endTime) {\r\n        notificationService.showAlert('Vui lòng chọn thời gian bắt đầu và kết thúc', 'warning');\r\n        return false;\r\n      }\r\n      \r\n      // Check if start time is after end time\r\n      if (new Date(rangeSchedule.startTime) >= new Date(rangeSchedule.endTime)) {\r\n        notificationService.showAlert('Thời gian bắt đầu phải trước thời gian kết thúc', 'warning');\r\n        return false;\r\n      }\r\n      \r\n      // Check if start time is in the past\r\n      if (new Date(rangeSchedule.startTime) <= new Date()) {\r\n        notificationService.showAlert('Thời gian bắt đầu phải ở tương lai', 'warning');\r\n        return false;\r\n      }\r\n    } else if (scheduleType === 'countdown') {\r\n      if (!countdownSchedule.seconds || countdownSchedule.seconds <= 0) {\r\n        notificationService.showAlert('Vui lòng nhập thời gian hợp lệ', 'warning');\r\n        return false;\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  };\r\n  \r\n  const startCountdown = async () => {\r\n    if (countdownSchedule.seconds <= 0) {\r\n      notificationService.showAlert('Vui lòng nhập thời gian hợp lệ', 'warning');\r\n      return;\r\n    }\r\n\r\n    setCountdownActive(true);\r\n    setRemainingTime(countdownSchedule.seconds);\r\n\r\n    // Create a future timestamp for the scheduled action\r\n    const actionTime = new Date(Date.now() + countdownSchedule.seconds * 1000).toISOString();\r\n    const startTime = new Date().toISOString();\r\n\r\n    try {\r\n      // Create local countdown object first\r\n      const newCountdown = {\r\n        id: 'countdown-' + Date.now(),\r\n        type: 'countdown',\r\n        action: countdownSchedule.action,\r\n        startTime: startTime,\r\n        scheduledTime: actionTime,\r\n        remainingSeconds: countdownSchedule.seconds,\r\n        device_type: deviceType\r\n      };\r\n      \r\n      // Add to schedules list immediately for visual feedback\r\n      setActiveCountdown(newCountdown);\r\n      setSchedules(prev => [newCountdown, ...prev]);\r\n      \r\n      // Then send to backend\r\n      await DeviceController.scheduleDevice(\r\n        deviceType,\r\n        countdownSchedule.action,\r\n        actionTime\r\n      );\r\n      \r\n      notificationService.showAlert(\r\n        `Hẹn giờ ${countdownSchedule.action === 'on' ? 'bật' : 'tắt'} ${deviceName} sau ${countdownSchedule.seconds} giây`,\r\n        'success'\r\n      );\r\n      \r\n      // Start the countdown timer\r\n      const timer = setInterval(() => {\r\n        setRemainingTime(prev => {\r\n          if (prev <= 1) {\r\n            clearInterval(timer);\r\n            setCountdownActive(false);\r\n            setActiveCountdown(null);\r\n            \r\n            // Reload schedules to refresh the list after countdown completes\r\n            setTimeout(() => loadSchedules(), 1000);\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n\r\n      // Cleanup interval on component unmount\r\n      return () => clearInterval(timer);\r\n    } catch (error) {\r\n      console.error('Error creating countdown:', error);\r\n      notificationService.showAlert(`Không thể tạo hẹn giờ: ${error.message}`, 'error');\r\n      setCountdownActive(false);\r\n      setActiveCountdown(null);\r\n      \r\n      // Remove the local countdown from the list if API call fails\r\n      setSchedules(prev => prev.filter(s => s.id !== 'countdown-' + Date.now()));\r\n    }\r\n  };\r\n  \r\n  const handleCreateSchedule = async () => {\r\n    if (!validateSchedule()) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      if (scheduleType === 'single') {\r\n        await DeviceController.scheduleDevice(\r\n          deviceType,\r\n          singleSchedule.action,\r\n          formatDateTimeForApi(singleSchedule.time)\r\n        );\r\n        notificationService.showAlert(\r\n          `Đã hẹn giờ ${singleSchedule.action === 'on' ? 'bật' : 'tắt'} ${deviceName} vào ${formatDateTimeForDisplay(singleSchedule.time)}`,\r\n          'success'\r\n        );\r\n        // Reset form\r\n        setSingleSchedule({ action: 'on', time: '' });\r\n      } else if (scheduleType === 'range') {\r\n        await DeviceController.scheduleDeviceRange(\r\n          deviceType,\r\n          formatDateTimeForApi(rangeSchedule.startTime),\r\n          formatDateTimeForApi(rangeSchedule.endTime)\r\n        );\r\n        notificationService.showAlert(\r\n          `Đã hẹn giờ ${deviceName} hoạt động từ ${formatDateTimeForDisplay(rangeSchedule.startTime)} đến ${formatDateTimeForDisplay(rangeSchedule.endTime)}`,\r\n          'success'\r\n        );\r\n        // Reset form\r\n        setRangeSchedule({ startTime: '', endTime: '' });\r\n      }\r\n      \r\n      // Reload schedules\r\n      loadSchedules();\r\n    } catch (error) {\r\n      console.error('Error creating schedule:', error);\r\n      notificationService.showAlert(`Không thể tạo lịch trình: ${error.message}`, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleCancelSchedule = async (scheduleId) => {\r\n    if (!window.confirm('Bạn có chắc chắn muốn hủy lịch trình này?')) return;\r\n    \r\n    // Check if it's a local countdown schedule\r\n    if (String(scheduleId).startsWith('countdown-')) {\r\n      setActiveCountdown(null);\r\n      setCountdownActive(false);\r\n      setSchedules(prev => prev.filter(s => s.id !== scheduleId));\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    try {\r\n      await DeviceController.cancelSchedule(scheduleId);\r\n      notificationService.showAlert('Đã hủy lịch trình thành công', 'success');\r\n      \r\n      // Remove from local state\r\n      setSchedules(prev => prev.filter(s => s.id !== scheduleId && s.schedule_id !== scheduleId));\r\n    } catch (error) {\r\n      console.error('Error canceling schedule:', error);\r\n      notificationService.showAlert(`Không thể hủy lịch trình: ${error.message}`, 'error');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  // Check if a schedule is expired/completed\r\n  const isScheduleActive = (schedule) => {\r\n    // Always show countdown schedules as active\r\n    if (schedule.type === 'countdown') {\r\n      return true;\r\n    }\r\n    \r\n    if (schedule.status === 'completed' || schedule.status === 'canceled' || schedule.executed === true) {\r\n      return false;\r\n    }\r\n    \r\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\r\n      const time = schedule.scheduledTime || schedule.start_time;\r\n      return new Date(time) > new Date();\r\n    } else {\r\n      const endTime = schedule.endTime || schedule.end_time;\r\n      return new Date(endTime) > new Date();\r\n    }\r\n  };\r\n  \r\n  // Get status text based on schedule status and times\r\n  const getScheduleStatusText = (schedule) => {\r\n    // For countdown schedules\r\n    if (schedule.type === 'countdown') {\r\n      return (\r\n        <CountdownStatus \r\n          initialSeconds={schedule.remainingSeconds} \r\n          onComplete={() => {\r\n            // Remove this countdown from the list when complete\r\n            setSchedules(prevSchedules => \r\n              prevSchedules.filter(s => s.id !== schedule.id)\r\n            );\r\n          }} \r\n        />\r\n      );\r\n    }\r\n    \r\n    if (schedule.status === 'completed' || schedule.executed === true) return 'Đã hoàn thành';\r\n    if (schedule.status === 'canceled') return 'Đã hủy';\r\n    \r\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\r\n      const time = schedule.scheduledTime || schedule.start_time;\r\n      return new Date(time) > new Date() ? 'Chờ thực hiện' : 'Đã hết hạn';\r\n    } else {\r\n      const startTime = schedule.startTime || schedule.start_time;\r\n      const endTime = schedule.endTime || schedule.end_time;\r\n      \r\n      if (new Date(endTime) < new Date()) {\r\n        return 'Đã hết hạn';\r\n      } else if (new Date(startTime) > new Date()) {\r\n        return 'Chờ thực hiện';\r\n      } else {\r\n        return 'Đang hoạt động';\r\n      }\r\n    }\r\n  };\r\n\r\n  // Format seconds to mm:ss\r\n  const formatSeconds = (seconds) => {\r\n    if (!seconds && seconds !== 0) return '00:00';\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n  \r\n  // Get scheduled time display from schedule object\r\n  const getScheduleTimeDisplay = (schedule) => {\r\n    // For countdown schedules\r\n    if (schedule.type === 'countdown') {\r\n      return (\r\n        <>\r\n          <div>Bắt đầu: {formatDateTimeForDisplay(schedule.startTime)}</div>\r\n          <div>Kết thúc: {formatDateTimeForDisplay(schedule.scheduledTime)}</div>\r\n        </>\r\n      );\r\n    }\r\n    \r\n    if (schedule.type === 'single' || schedule.schedule_type === 'once') {\r\n      const time = schedule.scheduledTime || schedule.start_time;\r\n      return formatDateTimeForDisplay(time);\r\n    } else {\r\n      const startTime = schedule.startTime || schedule.start_time;\r\n      const endTime = schedule.endTime || schedule.end_time;\r\n      return (\r\n        <>\r\n          <div>Bắt đầu: {formatDateTimeForDisplay(startTime)}</div>\r\n          <div>Kết thúc: {formatDateTimeForDisplay(endTime)}</div>\r\n        </>\r\n      );\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"device-scheduling\">\r\n      <h3>Hẹn giờ cho {deviceName}</h3>\r\n      \r\n      <div className=\"scheduling-form\">\r\n        <div className=\"schedule-type-selector\">\r\n          <button \r\n            className={`schedule-type-btn ${scheduleType === 'single' ? 'active' : ''}`}\r\n            onClick={() => setScheduleType('single')}\r\n          >\r\n            Hẹn giờ đơn lẻ\r\n          </button>\r\n          <button \r\n            className={`schedule-type-btn ${scheduleType === 'range' ? 'active' : ''}`}\r\n            onClick={() => setScheduleType('range')}\r\n          >\r\n            Hẹn giờ hoạt động\r\n          </button>\r\n          <button \r\n            className={`schedule-type-btn ${scheduleType === 'countdown' ? 'active' : ''}`}\r\n            onClick={() => setScheduleType('countdown')}\r\n          >\r\n            Hẹn giờ đếm ngược\r\n          </button>\r\n        </div>\r\n        \r\n        {scheduleType === 'single' ? (\r\n          <div className=\"single-schedule-form\">\r\n            <div className=\"form-group\">\r\n              <label>Hành động:</label>\r\n              <select \r\n                name=\"action\"\r\n                value={singleSchedule.action}\r\n                onChange={handleSingleScheduleChange}\r\n              >\r\n                <option value=\"on\">Bật</option>\r\n                <option value=\"off\">Tắt</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Thời gian:</label>\r\n              <input \r\n                type=\"datetime-local\"\r\n                name=\"time\"\r\n                value={singleSchedule.time}\r\n                onChange={handleSingleScheduleChange}\r\n              />\r\n            </div>\r\n            \r\n            <button \r\n              className=\"create-schedule-btn\"\r\n              onClick={handleCreateSchedule}\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Đang xử lý...' : 'Tạo lịch trình'}\r\n            </button>\r\n          </div>\r\n        ) : scheduleType === 'range' ? (\r\n          <div className=\"range-schedule-form\">\r\n            <div className=\"form-group\">\r\n              <label>Thời gian bắt đầu:</label>\r\n              <input \r\n                type=\"datetime-local\"\r\n                name=\"startTime\"\r\n                value={rangeSchedule.startTime}\r\n                onChange={handleRangeScheduleChange}\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Thời gian kết thúc:</label>\r\n              <input \r\n                type=\"datetime-local\"\r\n                name=\"endTime\"\r\n                value={rangeSchedule.endTime}\r\n                onChange={handleRangeScheduleChange}\r\n              />\r\n            </div>\r\n            \r\n            <button \r\n              className=\"create-schedule-btn\"\r\n              onClick={handleCreateSchedule}\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Đang xử lý...' : 'Tạo lịch trình'}\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"countdown-schedule-form\">\r\n            <div className=\"form-group\">\r\n              <label>Hành động:</label>\r\n              <select \r\n                name=\"action\"\r\n                value={countdownSchedule.action}\r\n                onChange={handleCountdownScheduleChange}\r\n              >\r\n                <option value=\"on\">Bật</option>\r\n                <option value=\"off\">Tắt</option>\r\n              </select>\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label>Thời gian (giây):</label>\r\n              <input \r\n                type=\"number\"\r\n                name=\"seconds\"\r\n                value={countdownSchedule.seconds}\r\n                onChange={handleCountdownScheduleChange}\r\n                disabled={countdownActive}\r\n                min=\"1\"\r\n              />\r\n              \r\n              <div className=\"countdown-presets\">\r\n                <button \r\n                  onClick={() => setCountdownPreset(10)}\r\n                  disabled={countdownActive}\r\n                  className=\"preset-btn\"\r\n                >\r\n                  10s\r\n                </button>\r\n                <button \r\n                  onClick={() => setCountdownPreset(30)}\r\n                  disabled={countdownActive}\r\n                  className=\"preset-btn\"\r\n                >\r\n                  30s\r\n                </button>\r\n                <button \r\n                  onClick={() => setCountdownPreset(60)}\r\n                  disabled={countdownActive}\r\n                  className=\"preset-btn\"\r\n                >\r\n                  1m\r\n                </button>\r\n                <button \r\n                  onClick={() => setCountdownPreset(300)}\r\n                  disabled={countdownActive}\r\n                  className=\"preset-btn\"\r\n                >\r\n                  5m\r\n                </button>\r\n              </div>\r\n            </div>\r\n            \r\n            {countdownActive ? (\r\n              <div className=\"countdown-display\">\r\n                <div className=\"countdown-time\">{formatSeconds(remainingTime)}</div>\r\n                <div className=\"countdown-label\">\r\n                  {countdownSchedule.action === 'on' ? 'Bật' : 'Tắt'} sau\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <button \r\n                className=\"create-schedule-btn\"\r\n                onClick={startCountdown}\r\n                disabled={loading}\r\n              >\r\n                {loading ? 'Đang xử lý...' : 'Bắt đầu đếm ngược'}\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"schedules-list\">\r\n        <h4>Danh sách lịch trình</h4>\r\n        \r\n        {loading && schedules.length === 0 ? (\r\n          <p className=\"loading-text\">Đang tải lịch trình...</p>\r\n        ) : schedules.length === 0 ? (\r\n          <p className=\"no-schedules\">Không có lịch trình nào</p>\r\n        ) : (\r\n          <table className=\"schedules-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Loại</th>\r\n                <th>Thời gian</th>\r\n                <th>Trạng thái</th>\r\n                <th>Hành động</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {schedules.map(schedule => (\r\n                <tr \r\n                  key={schedule.id || schedule.schedule_id}\r\n                  className={isScheduleActive(schedule) ? 'active-schedule' : 'inactive-schedule'}\r\n                >\r\n                  <td>\r\n                    {schedule.type === 'countdown' \r\n                      ? `Đếm ngược ${schedule.action === 'on' ? 'bật' : 'tắt'}`\r\n                      : (schedule.type === 'single' || schedule.schedule_type === 'once')\r\n                        ? `${schedule.action === 'on' ? 'Bật' : 'Tắt'} thiết bị` \r\n                        : 'Khoảng thời gian'}\r\n                  </td>\r\n                  <td>\r\n                    {getScheduleTimeDisplay(schedule)}\r\n                  </td>\r\n                  <td>{getScheduleStatusText(schedule)}</td>\r\n                  <td>\r\n                    {isScheduleActive(schedule) && (\r\n                      <button \r\n                        className=\"cancel-schedule-btn\"\r\n                        onClick={() => handleCancelSchedule(schedule.id || schedule.schedule_id)}\r\n                        disabled={loading}\r\n                      >\r\n                        Hủy\r\n                      </button>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DeviceScheduling; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}