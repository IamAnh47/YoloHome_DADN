{"ast":null,"code":"import authService from '../services/authService';\nimport UserModel from '../models/UserModel';\nclass AuthController {\n  static async login(username, password) {\n    try {\n      // Call authentication service\n      const response = await authService.login(username, password);\n      if (response.success) {\n        // Store user information and token\n        localStorage.setItem('userId', response.user.id);\n        localStorage.setItem('authToken', response.token);\n\n        // Create user model instance and store in localStorage\n        const user = new UserModel(response.user);\n        localStorage.setItem('userData', JSON.stringify(user));\n        return {\n          success: true,\n          token: response.token,\n          userId: response.user.id\n        };\n      } else {\n        return {\n          success: false,\n          message: response.message || 'Login failed'\n        };\n      }\n    } catch (error) {\n      console.error('AuthController login error:', error);\n      return {\n        success: false,\n        message: 'An error occurred during login'\n      };\n    }\n  }\n  static async logout() {\n    try {\n      await authService.logout();\n\n      // Clear local storage\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('userId');\n      localStorage.removeItem('userData');\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('AuthController logout error:', error);\n      return {\n        success: false,\n        message: 'An error occurred during logout'\n      };\n    }\n  }\n  static isAuthenticated() {\n    return localStorage.getItem('authToken') !== null;\n  }\n  static getCurrentUserId() {\n    return localStorage.getItem('userId');\n  }\n  static getCurrentUser() {\n    const userData = localStorage.getItem('userData');\n    return userData ? JSON.parse(userData) : null;\n  }\n}\nexport default AuthController;","map":{"version":3,"names":["authService","UserModel","AuthController","login","username","password","response","success","localStorage","setItem","user","id","token","JSON","stringify","userId","message","error","console","logout","removeItem","isAuthenticated","getItem","getCurrentUserId","getCurrentUser","userData","parse"],"sources":["C:/Users/tuana/University/The_Third_Year/HK242/Đồ án đa ngành/YoloHome_DADN/YoloHome_DADN/frontend/src/controllers/AuthController.js"],"sourcesContent":["import authService from '../services/authService';\r\nimport UserModel from '../models/UserModel';\r\n\r\nclass AuthController {\r\n  static async login(username, password) {\r\n    try {\r\n      // Call authentication service\r\n      const response = await authService.login(username, password);\r\n      \r\n      if (response.success) {\r\n        // Store user information and token\r\n        localStorage.setItem('userId', response.user.id);\r\n        localStorage.setItem('authToken', response.token);\r\n        \r\n        // Create user model instance and store in localStorage\r\n        const user = new UserModel(response.user);\r\n        localStorage.setItem('userData', JSON.stringify(user));\r\n        \r\n        return {\r\n          success: true,\r\n          token: response.token,\r\n          userId: response.user.id\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          message: response.message || 'Login failed'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('AuthController login error:', error);\r\n      return {\r\n        success: false,\r\n        message: 'An error occurred during login'\r\n      };\r\n    }\r\n  }\r\n  \r\n  static async logout() {\r\n    try {\r\n      await authService.logout();\r\n      \r\n      // Clear local storage\r\n      localStorage.removeItem('authToken');\r\n      localStorage.removeItem('userId');\r\n      localStorage.removeItem('userData');\r\n      \r\n      return { success: true };\r\n    } catch (error) {\r\n      console.error('AuthController logout error:', error);\r\n      return {\r\n        success: false,\r\n        message: 'An error occurred during logout'\r\n      };\r\n    }\r\n  }\r\n  \r\n  static isAuthenticated() {\r\n    return localStorage.getItem('authToken') !== null;\r\n  }\r\n  \r\n  static getCurrentUserId() {\r\n    return localStorage.getItem('userId');\r\n  }\r\n  \r\n  static getCurrentUser() {\r\n    const userData = localStorage.getItem('userData');\r\n    return userData ? JSON.parse(userData) : null;\r\n  }\r\n}\r\n\r\nexport default AuthController;"],"mappings":"AAAA,OAAOA,WAAW,MAAM,yBAAyB;AACjD,OAAOC,SAAS,MAAM,qBAAqB;AAE3C,MAAMC,cAAc,CAAC;EACnB,aAAaC,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IACrC,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMN,WAAW,CAACG,KAAK,CAACC,QAAQ,EAAEC,QAAQ,CAAC;MAE5D,IAAIC,QAAQ,CAACC,OAAO,EAAE;QACpB;QACAC,YAAY,CAACC,OAAO,CAAC,QAAQ,EAAEH,QAAQ,CAACI,IAAI,CAACC,EAAE,CAAC;QAChDH,YAAY,CAACC,OAAO,CAAC,WAAW,EAAEH,QAAQ,CAACM,KAAK,CAAC;;QAEjD;QACA,MAAMF,IAAI,GAAG,IAAIT,SAAS,CAACK,QAAQ,CAACI,IAAI,CAAC;QACzCF,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEI,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;QAEtD,OAAO;UACLH,OAAO,EAAE,IAAI;UACbK,KAAK,EAAEN,QAAQ,CAACM,KAAK;UACrBG,MAAM,EAAET,QAAQ,CAACI,IAAI,CAACC;QACxB,CAAC;MACH,CAAC,MAAM;QACL,OAAO;UACLJ,OAAO,EAAE,KAAK;UACdS,OAAO,EAAEV,QAAQ,CAACU,OAAO,IAAI;QAC/B,CAAC;MACH;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,OAAO;QACLV,OAAO,EAAE,KAAK;QACdS,OAAO,EAAE;MACX,CAAC;IACH;EACF;EAEA,aAAaG,MAAMA,CAAA,EAAG;IACpB,IAAI;MACF,MAAMnB,WAAW,CAACmB,MAAM,CAAC,CAAC;;MAE1B;MACAX,YAAY,CAACY,UAAU,CAAC,WAAW,CAAC;MACpCZ,YAAY,CAACY,UAAU,CAAC,QAAQ,CAAC;MACjCZ,YAAY,CAACY,UAAU,CAAC,UAAU,CAAC;MAEnC,OAAO;QAAEb,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOU,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpD,OAAO;QACLV,OAAO,EAAE,KAAK;QACdS,OAAO,EAAE;MACX,CAAC;IACH;EACF;EAEA,OAAOK,eAAeA,CAAA,EAAG;IACvB,OAAOb,YAAY,CAACc,OAAO,CAAC,WAAW,CAAC,KAAK,IAAI;EACnD;EAEA,OAAOC,gBAAgBA,CAAA,EAAG;IACxB,OAAOf,YAAY,CAACc,OAAO,CAAC,QAAQ,CAAC;EACvC;EAEA,OAAOE,cAAcA,CAAA,EAAG;IACtB,MAAMC,QAAQ,GAAGjB,YAAY,CAACc,OAAO,CAAC,UAAU,CAAC;IACjD,OAAOG,QAAQ,GAAGZ,IAAI,CAACa,KAAK,CAACD,QAAQ,CAAC,GAAG,IAAI;EAC/C;AACF;AAEA,eAAevB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}